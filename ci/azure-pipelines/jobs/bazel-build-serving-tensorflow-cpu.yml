jobs:
  - job: BazelBuildServingTensorFlowCPU
    displayName: Bazel build serving (TensorFlow CPU)
    condition: and(succeeded(), eq(dependencies.BazelBuildServingTensorFlowCheck.outputs['TensorflowBuildCheck.BuildTensorFlow'], 'true'))
    dependsOn: BazelBuildServingTensorFlowCheck
    strategy:
        matrix:
            Linux:
                vmImage: Ubuntu-18.04
            macOS:
                vmImage: macos-latest
    pool:
        vmImage: $(vmImage)
    timeoutInMinutes: 0
    steps:
      - template: ../steps/install-automake.yml
      - task: UsePythonVersion@0
        inputs:
          versionSpec: '3.8'
        displayName: Install Python3.8
